% if (@{$errors}) {
<div class="errors">
<ul>
% for my $error (@{$errors}) {
<li><%= $error %></li>
% }
</ul>
</div> <!-- errors -->
% }

<div class="dropdowncontainer">
<div class="dropdown">
<div class="dropdownheader">
<a href="/m/actions">Actions</a>
</div>
<div class="dropdownmenu">
% for my $shortcut (@{$shortcuts}) {
<a href="<%= $shortcut->[0] %>"><%= $shortcut->[1] %></a>
% }
</div> <!-- dropdownmenu -->
</div> <!-- dropdown -->

<div class="dropdown">
<div class="dropdownheader">
<a href="/m/presets">Presets</a>
</div>
<div class="dropdownmenu">
% for my $preset (@{$presets}) {
% if ($preset->[1] eq 'manage') {
<a href="<%= $preset->[0] %>" class="special"><%= $preset->[1] %></a>
% }
% else {
<a href="<%= $preset->[0] %>"><%= $preset->[1] %></a>
% }
% }
</div> <!-- dropdownmenu -->
</div> <!-- dropdown -->

<div class="dropdown">
<div class="dropdownheader">
<a href="/m/layers">Layers</a>
</div>
<div class="dropdownmenu">
% for my $l (@{$layers}) {
<a href="<%= $l->[0] %>"><%= $l->[1] %></a>
% }
</div> <!-- dropdownmenu -->
</div> <!-- dropdown -->
</div> <!-- dropdowncontainer -->

<div class="overview">
% for my $location (keys %{$coordinates}) {
%	my $type = $coordinates->{$location}->{type} // q{};
%	if (
%	($coordinates->{$location}->{x1} + $coordinates->{$location}->{y1} != 0)
%	and (($type ne q{} and $layer ne 'wiki') or ($type eq q{} and $layer eq 'wiki'))) {
<div id="<%= $location %>" class="<%== statusclass($type, $location) %>">
% if ($type ne q{} and $layer eq $coordinates->{$location}->{layer}) {
%==	statusimage($type, $location);
% if ($location =~ m{^[0-9a-zA-Z_]*$} and $type ne 'charwrite') {
% my $delay = sprintf('15%03d', rand(999));
%= javascript begin
function reload<%= $location %>() {
	d = new Date();
	$("#img<%= $location %>").attr("src", "/get/<%= $location %>.png?r="+d.getTime());
	setTimeout('reload<%= $location %>()', <%= $delay %>);
}
//setTimeout('reload<%= $location %>()', <%= $delay %>);
% end
% }
%	if ($type ~~ [qw[infoarea rtext]]) {
%==	statustext($type, $location);
%	}
%	elsif (statustext($type, $location)) {
<div class="popup">
%== statustext($type, $location);
</div> <!-- popup -->
%	}
% }
% elsif ($layer eq 'wiki') {
	<div class="popup">
		<ul>
		%== has_location($location)
		</ul>
	</div>
% }
</div> <!-- location -->
% }
% }
</div> <!-- overview -->
